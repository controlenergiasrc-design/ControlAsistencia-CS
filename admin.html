<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PanelAdmin - ControlAsistencia</title>

    <!-- Tipograf√≠a (Poppins) -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Bootstrap & FontAwesome -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      rel="stylesheet"
    />

    <!-- Icono de pesta√±a -->
    <link rel="icon" type="image/jpeg" href="images/logoweb.jpeg" />

    <style>
      :root {
        --isse-blue: #41b6e6;
        --isse-green: #4caf50;
        --sidebar-bg: #1e1e1e;
        --sidebar-txt: #ffffff;
        --alt-1: #f9f9f9;
        --alt-2: #eef7ff;
        --btn-gray: #bfbfbf;
        --isse-orange: #fd7e14;
      }

      html,
      body {
        height: 100%;
        background: #f5f6f8;
        font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto,
          Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans",
          "Apple Color Emoji", "Segoe UI Emoji";
      }

      /* ===== Layout base ===== */
      .app {
        display: flex;
        min-height: 100vh;
      }

      /* ===== Sidebar ===== */
      .sidebar {
        width: 270px;
        flex: 0 0 270px;
        background: var(--sidebar-bg);
        color: var(--sidebar-txt);
        display: flex;
        flex-direction: column;
        position: sticky;
        top: 0;
        height: 100vh;
      }
      .sidebar .brand {
        padding: 18px 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.06);
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .sidebar .brand i {
        color: var(--isse-blue);
      }
      .sidebar .brand .title {
        font-weight: 600;
        letter-spacing: 0.3px;
      }

      .nav-menu {
        list-style: none;
        margin: 0;
        padding: 12px;
      }
      .nav-item {
        margin: 6px 0;
      }
      .nav-link {
        display: flex;
        align-items: center;
        gap: 12px;
        color: var(--sidebar-txt);
        text-decoration: none;
        padding: 10px 12px;
        border-radius: 10px;
        transition: 0.15s ease-in-out;
      }
      .nav-link:hover,
      .nav-link.active {
        background: var(--isse-blue);
        color: #fff;
      }
      .nav-link i {
        width: 20px;
        text-align: center;
      }

      /* ===== Contenido ===== */
      .content {
        flex: 1;
        min-width: 0;
      }

      .topbar {
        background: #fff;
        border-bottom: 1px solid #eceff3;
        position: sticky;
        top: 0;
        z-index: 20;
      }
      .topbar .btn-menu {
        display: none;
      }

      .page {
        padding: 20px;
        max-width: 1400px;
        margin-inline: auto;
      }

      .page-title {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        margin: 8px 0 18px;
      }
      .page-title h1 {
        font-size: 1.4rem;
        font-weight: 600;
        margin: 0;
        color: #1f2937;
      }
      .page-sub {
        color: #6b7280;
        font-size: 0.95rem;
      }

      /* ===== Tarjetas resumen ===== */
      .cards {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 16px;
        margin: 8px 0 22px;
      }
      .card-metric {
        color: #fff;
        border: 0;
        border-radius: 16px;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 18px 18px;
      }
      .card-metric .meta {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }
      .card-metric .meta .label {
        opacity: 0.95;
        font-weight: 500;
      }
      .card-metric .meta .value {
        font-size: 2rem;
        font-weight: 700;
        line-height: 1;
      }
      .card-metric .icon {
        font-size: 34px;
        opacity: 0.9;
      }
      .card-blue {
        background: var(--isse-blue);
      }
      .card-orange {
        background: var(--isse-orange);
      }

      /* ===== Tabla ===== */
      .card-panel {
        background: #fff;
        border: 0;
        border-radius: 16px;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
      }
      .card-panel .card-header {
        padding: 16px 18px;
        border-bottom: 1px solid #eef1f5;
        background: #fff;
        border-top-left-radius: 16px;
        border-top-right-radius: 16px;
      }
      .card-panel .card-title {
        margin: 0;
        font-size: 1.05rem;
        font-weight: 600;
        color: #334155;
      }

      .table {
        margin: 0;
      }
      .table thead th {
        background: #fafafa;
        font-weight: 600;
        color: #475569;
        border-bottom: 1px solid #eef1f5;
      }
      .table td,
      .table th {
        vertical-align: middle;
      }


      /* Botones grises */
      .btn-gray {
        background: var(--btn-gray);
        color: #212529;
        border: none;
        transition: background-color 0.25s ease;
      }
      .btn-gray:hover {
        background-color: #ff9800;
        color: #fff;
      }

      /* Bot√≥n Auditar */
      .btn-audit {
        background: #d93025;
        color: #fff;
        border: none;
      }
      .btn-audit:hover {
        filter: brightness(0.9);
      }

      /* Responsive */
      @media (max-width: 992px) {
        .sidebar {
          position: fixed;
          inset: 0 auto 0 0;
          transform: translateX(-100%);
          transition: transform 0.25s ease;
          z-index: 1050;
        }
        .sidebar.open {
          transform: translateX(0);
        }
        .topbar .btn-menu {
          display: inline-flex;
          align-items: center;
          gap: 8px;
        }
        .page {
          padding: 16px;
        }
        .cards {
          grid-template-columns: 1fr;
        }
        .nav-dim {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.25);
          backdrop-filter: saturate(50%) blur(2px);
          display: none;
          z-index: 1040;
        }
        .nav-dim.show {
          display: block;
        }
        .content {
          width: 100%;
        }
      }

      /* Scroll tabla m√≥vil */
      .table-wrap {
        width: 100%;
        overflow: auto;
      }

      /* ======== MODAL DE AUDITOR√çA ======== */
.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  z-index: 100;
}

#modalAuditoria {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 200;
}

.auditoria-box {
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
  width: 880px;
  max-width: 95%;
  padding: 20px 30px;
  position: relative;
  animation: fadeIn 0.3s ease;

  /* Agregado para permitir scroll interno EN EL MODAL AUDITORIA */
        /* l√≠mite m√°ximo visible */
  overflow-y: auto;       /* activa scroll solo si el contenido se pasa */
}

@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

.auditoria-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 2px solid #eee;
  padding-bottom: 8px;
  margin-bottom: 16px;
}

.btn-cerrar {
  background: none;
  border: none;
  color: #d93025;
  font-size: 1.4rem;
  cursor: pointer;
  transition: 0.2s;
}
.btn-cerrar:hover {
  transform: scale(1.1);
}

.fotos {
  display: flex;
  gap: 16px;
  justify-content: space-between;
  flex-wrap: wrap;
}

.foto-box {
  flex: 1;
  display: flex;
  align-items: center;   /* ‚Üê FIX */
  position: relative;
  gap: 10px;
  border: 3px solid #41b6e6;
  border-radius: 20px;
  padding: 10px 15px;
  background: #f8fbfd;
}

.foto-box.salida {
  border-color: #fd7e14;
  background: #fff8f3;
}

.foto-img {
  width: 120px;
  height: 120px;
  border-radius: 10px;
  border: 1px solid #ccc;
  object-fit: cover;
  display: block;
  position: static;   /* ‚Üê FIX */
}

.foto-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
}


.link-maps {
  color: #41b6e6;
  text-decoration: none;
  font-size: 0.9rem;
}
.link-maps:hover {
  text-decoration: underline;
}

.section-pair {
  display: flex;
  gap: 16px;
  margin-top: 16px;
  flex-wrap: wrap;
}

.section {
  flex: 1;
  position: relative;
}

.dropdown {
  position: relative;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 10px;
  cursor: pointer;
  user-select: none;
  background: #f9f9f9;
}
.dropdown::after {
  content: '‚ñæ';
  position: absolute;
  right: 10px;
  top: 12px;
  font-size: 16px;
  color: #555;
}

.dropdown-menu {
  position: absolute;
  top: 105%;
  left: 0;
  width: 100%;
  background: #fff;
  border: 1px solid #ccc;
  border-radius: 8px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  z-index: 10;
  display: none;
  flex-direction: column;
  max-height: 200px;
  overflow-y: auto;
}
.dropdown-menu.active {
  display: flex;
}

.dropdown-option {
  padding: 8px 10px;
  cursor: pointer;
}
.dropdown-option:hover {
  background: #e3f2fd;
}

.selected-list {
  background: #f9f9f9;
  border-radius: 8px;
  border: 1px solid #ddd;
  padding: 8px;
  margin-top: 8px;
  font-size: 0.95rem;
  color: #333;
  min-height: 50px;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.tag {
  background: #e3f2fd;
  color: #0277bd;
  border-radius: 12px;
  padding: 4px 10px;
  display: flex;
  align-items: center;
  gap: 6px;
  border: 1px solid #90caf9;
}
.close-btn {
  background: none;
  border: none;
  font-size: 14px;
  cursor: pointer;
  color: #d32f2f;
}

textarea {
  width: 100%;
  border-radius: 8px;
  border: 1px solid #ccc;
  padding: 8px;
  resize: vertical;
  min-height: 60px;
}

.botones {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  margin-top: 20px;
}

.btn-guardar {
  background: #41b6e6;
  color: white;
  border: none;
}
.btn-guardar:hover {
  background: #2da0cf;
}

.btn-auditar {
  background: #d93025;
  color: white;
  border: none;
}
.btn-auditar:hover {
  background: #b8281f;
}

/*===== BOT√ìN EDITAR FOTO ===== */
.btn-edit-foto {
  position: absolute;
  top: 8px;
  left: 104px; /* ‚Üê esquina superior derecha de la foto */
  width: 32px;
  height: 32px;
  background: rgba(255, 255, 255, 0.45);
  border: 1px solid rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(6px);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #444;
  font-size: 16px;
  cursor: pointer;
  z-index: 20;
  transition: all 0.25s ease;
  box-shadow: 0 4px 12px rgba(0,0,0,0.12);
}

.btn-edit-foto:hover {
  background: rgba(255, 255, 255, 0.85);
  transform: scale(1.15);
  color: #111;
}
.btn-edit-foto.disabled {
  pointer-events: none;
  opacity: 0.35;
  filter: grayscale(100%);
}
/* ============================================================
   HISTORIAL ‚Äî ESTILO EXCEL (solo esta tabla)
============================================================ */

.historial-card {
  font-size: 11px;
}

/* Scroll lateral */
.historial-table-container {
  overflow-x: auto;
  border: 1px solid #ddd;
  border-radius: 6px;
}

/* Tabla estilo Excel */
.historial-table {
  width: max-content;
  border-collapse: collapse;
  font-size: 11px;
}

.historial-table thead th {
  background: #f1f5f9;        /* gris clarito estilo Excel */
  font-weight: 600;
  color: #475569;
  padding: 6px 10px;
  border-bottom: 2px solid #cbd5e1;
  white-space: nowrap;
}

.historial-table tbody td {
  padding: 4px 8px;
  border-bottom: 1px solid #e2e8f0;
  white-space: nowrap;
}

/*  HISTORIAL - UN SOLO COLOR EN TODAS LAS FILAS*/
.historial-table tbody tr {
  background-color: #fff4ea !important; /* naranjita suave */
  transition: background-color 0.2s ease-in-out; /* ‚Üê AQU√ç la transici√≥n */
}

/* HOVER blanco */
.historial-table tbody tr:hover {
  background-color: #ffffff !important;
}

.historial-table button {
  font-size: 10px;
  padding: 3px 6px;
}

/* Paginaci√≥n */
.historial-paginacion {
  margin-top: 12px;
  display: flex;
  justify-content: center;
  gap: 4px;
}

.historial-paginacion button {
  font-size: 11px;
  padding: 4px 8px;
}

/* Botones especiales del historial */
.btn-ver-foto {
  background: var(--isse-blue);
  color: white;
  border: none;
  padding: 3px 8px;
  font-size: 10px;
  border-radius: 4px;
}
.btn-ver-foto:hover {
  background: #2da0cf;
}

.btn-auditar-hist {
  background: #d93025;
  color: white;
  border: none;
  padding: 3px 8px;
  font-size: 10px;
  border-radius: 4px;
}
.btn-auditar-hist:hover {
  background: #b8281f;
}
/* ====== REDUCIR TAMA√ëO DE LETRA DE LA TABLA PRINCIPAL ====== */
.card-panel table.table th,
.card-panel table.table td {
  font-size: 14px !important;
  padding: 6px 8px !important;
}

/* ====== REDUCIR TAMA√ëO DE LOS BOTONES ====== */
.card-panel table.table .btn-audit {
  font-size: 13px !important;
  padding: 6px 8px !important;
  line-height: 1.1 !important;
}
.card-panel table.table .btn-gray {
  font-size: 13px !important;
  padding: 5px 6px !important;
  line-height: 1.1 !important;
}
/* ===========================================
   HISTORIAL ‚Äî FIX TOTAL (sticky + tama√±os)INMOVILIZAR
=========================================== */

/* QUITAR ESPACIOS */
.historial-table {
  border-collapse: collapse;
  border-spacing: 0;
  width: max-content;
}

/* HOVER PARA TODA LA FILA */
.historial-table tbody tr:hover td {
  background-color: #ffffff !important;
}

/* PADDING */
.historial-table th,
.historial-table td {
  padding: 4px 8px !important;
  font-size: 11px !important;
  border: none !important;
}



/* ================================
   CONGELAR PRIMERAS 3 COLUMNAS
================================ */

/* COL 1 ‚Äî ID */
.historial-table th:nth-child(1),
.historial-table td:nth-child(1) {
  position: sticky;
  left: 0px;
  background: #fff4ea !important;
  z-index: 2 !important; /* <‚îÄ‚îÄ BAJA para no tapar encabezado */
}

/* COL 2 ‚Äî N√∫mero C/S */
.historial-table th:nth-child(2),
.historial-table td:nth-child(2) {
  position: sticky;
  left: 32px; /* tus medidas */
  background: #fff4ea !important;
  z-index: 2 !important;
}

/* COL 3 ‚Äî Nombre (con borde derecho) */
.historial-table th:nth-child(3),
.historial-table td:nth-child(3) {
  position: sticky;
  left: 116px; /* tus medidas */
  background: #fff4ea !important;
  z-index: 2 !important;
  border-right: 2px solid #d0d0d0 !important;
}

/* ================================
   COLUMNAS GRANDES
================================ */

.historial-table th:nth-child(18),
.historial-table td:nth-child(18),
.historial-table th:nth-child(19),
.historial-table td:nth-child(19),
.historial-table th:nth-child(20),
.historial-table td:nth-child(20) {
  max-width: 180px;
  white-space: normal !important;
  word-wrap: break-word !important;
  line-height: 1.25;
}

/* Bot√≥n Auditar */
.historial-table th:nth-child(21),
.historial-table td:nth-child(21) {
  text-align: center;
  white-space: nowrap;
}
/* --- Encabezados de columnas fijas con fondo azul --- */
.historial-table thead th:nth-child(1),
.historial-table thead th:nth-child(2),
.historial-table thead th:nth-child(3) {
  background: #e0e9ffc4 !important;  /* mismo azul clarito */
  z-index: 4 !important;             /* arriba de los td sticky */
}

/* Borde inferior del encabezado */
.historial-table thead th {
  border-bottom: 2px solid #d0d0d0 !important;
  position: sticky;
  top: 0;
  z-index: 3;
}
/* Ocultar columnas: Actividades (18), Novedades (19), Observaciones (20) */
#tablaHistorialFront th:nth-child(18),
#tablaHistorialFront td:nth-child(18),
#tablaHistorialFront th:nth-child(19),
#tablaHistorialFront td:nth-child(19),
#tablaHistorialFront th:nth-child(20),
#tablaHistorialFront td:nth-child(20) {
  display: none !important;
}

/* Botones mini en la tabla (Ver foto y Ver ubicaci√≥n) */
.btn-mini {
  background: #eaeaea;
  border: 1px solid #ccc;
  padding: 3px 5px;
  border-radius: 8px;
  cursor: pointer;
  margin-right: 4px;
  transition: 0.2s;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  font-size: 14px;
}

.btn-mini i {
  font-size: 15px;
  color: #333;
}

.btn-mini:hover {
  background: #ff8800;
  border-color: #ff8800;
}

.btn-mini:hover i {
  color: white;
}

    </style>
  </head>
  <body>
    <div class="app">
      <aside id="sidebar" class="sidebar">
        <div class="brand">
          <i class="fa-solid fa-bolt fa-lg"></i>
          <div class="title">Control Asistencia</div>
        </div>
        <ul class="nav-menu">
          <li class="nav-item">
            <a class="nav-link active" href="#"
              ><i class="fa-solid fa-gauge"></i
              ><span>Asistencia diaria</span></a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#"
              ><i class="fa-solid fa-users"></i><span>Usuarios</span></a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#"
              ><i class="fa-solid fa-calendar-check"></i
              ><span>Pendientes</span></a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#"
              ><i class="fa-solid fa-gear"></i><span>Contrase√±a</span></a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#"
              ><i class="fa-solid fa-right-from-bracket"></i
              ><span>Cerrar sesi√≥n</span></a
            >
          </li>
        </ul>
      </aside>

      <div id="navDim" class="nav-dim"></div>

      <main class="content">
        <div
          class="topbar py-2 px-3 d-flex align-items-center justify-content-between"
        >
          <button
            id="btnMenu"
            class="btn btn-outline-secondary btn-sm btn-menu"
          >
            <i class="fa-solid fa-bars"></i> Men√∫
          </button>
          <div></div>
        </div>

        <!-- ======== M√ìDULO 1: ASISTENCIA DIARIAAAAA======== -->
        <div id="mod-asistencia" class="page visible">
          <div class="page-title">
            <div>
              <h1>Panel Administrador - Sistema de Control de Asistencia</h1>
              <div class="page-sub" id="saludoAdmin">
                Bienvenido Administrador
              </div>
            </div>
          </div>
          <div class="cards">
            <!-- Fotos de entrada hoy -->
            <div class="card-metric card-blue">
              <div class="meta">
                <div class="label">
                  <i class="fa-solid fa-camera me-2"></i>Fotos de entrada hoy
                </div>
                <div class="value" id="metricEntradas">0</div>
              </div>
              <div class="icon">
                <i class="fa-solid fa-arrow-right-to-bracket"></i>
              </div>
            </div>

            <!-- Fotos de salida hoy -->
            <div class="card-metric card-orange">
              <div class="meta">
                <div class="label">
                  <i class="fa-solid fa-camera me-2"></i>Fotos de salida hoy
                </div>
                <div class="value" id="metricSalidas">0</div>
              </div>
              <div class="icon">
                <i class="fa-solid fa-arrow-right-from-bracket"></i>
              </div>
            </div>
          </div>

                <div class="card card-panel">
                  <div
                   class="card-header d-flex align-items-center justify-content-between flex-wrap gap-2"
                 >
                   <h2 id="tituloRegistros" class="card-title m-0"></h2>

                    <div class="d-flex align-items-center">
                     <label for="filtroSector" class="me-2 fw-semibold text-secondary small">
                       Filtrar por sector
                      </label>
                      <select id="filtroSector" class="form-select form-select-sm" style="width: 160px;">
                        <option value="">Todos</option>
                      </select>
                    </div>
                  </div>
            <div class="card-body">
              <!--tabla de registros diarios-->
              <div class="table-wrap">
                  <table class="table tabla-hoy">
                  <thead>
                    <tr>
                      <th style="min-width: 100px">N√∫mero C/S</th>
                      <th style="min-width: 210px">Nombre</th>
                      <th style="min-width: 130px">Sector</th>
                      <th style="min-width: 110px">Tipo</th>
                      <th style="min-width: 105px">Hora</th>
                      <th style="min-width: 130px">Opciones</th>
                      <th style="min-width: 130px">Auditor√≠a</th>
                    </tr>
                  </thead>
                  <tbody id="tablaRegistros"></tbody>
                </table>

                <style>
                  .table {
                    border-collapse: collapse;
                    width: 100%;
                    border: 1px solid #d1d5db;
                  }

                  .table th,
                  .table td {
                    border: 1px solid #d1d5db;
                    vertical-align: middle;
                    text-align: center;
                    padding: 10px;
                  }

                  .table thead th {
                    background: #fafafa;
                    color: #475569;
                    font-weight: 600;
                  }

                  /* Alternancia cada 2 filas (Entrada/Salida) */
                  tbody tr:nth-child(4n-3),
                  tbody tr:nth-child(4n-2) {
                    background-color: #f9f9f9;
                  }

                  tbody tr:nth-child(4n-1),
                  tbody tr:nth-child(4n) {
                    background-color: #eef7ff;
                  }

                  .btn-gray {
                    background: #bfbfbf;
                    color: #212529;
                    border: none;
                    transition: background-color 0.25s ease;
                  }

                  .btn-gray:hover {
                    background-color: #ff9800;
                    color: #fff;
                  }

                  .btn-audit {
                    background: #d93025;
                    color: #fff;
                    border: none;
                  }

                  .btn-audit:hover {
                    filter: brightness(0.9);
                  }
                </style>
              </div>
            </div>
          </div>
        </div>

        <!--==========Modulo de usuarios==========-->
        <div id="mod-usuarios" class="page d-none">
          <div class="page-title">
            <h1>Gesti√≥n de usuarios</h1>
            <div class="page-sub">
              Cuadrillas, supervisores y estados activos
            </div>
          </div>

          <div class="card card-panel">
            <div
              class="card-header d-flex justify-content-between align-items-center"
            >
              <h2 class="card-title m-0">Usuarios registrados</h2>
              <button class="btn btn-primary btn-sm" id="btnAgregarUsuario">
                <i class="fa-solid fa-user-plus"></i> Nuevo usuario
              </button>
            </div>

            <div class="card-body">
              <div class="table-wrap">
                <table class="table">
                  <thead>
                    <tr>
                      <th style="min-width: 100px">N√∫mero C/S</th>
                      <th style="min-width: 210px">Nombre</th>
                      <th style="min-width: 110px">Tipo</th>
                      <th style="min-width: 130px">Sector</th>
                      <th style="min-width: 110px">Estado</th>
                      <th style="min-width: 100px">Acciones</th>
                    </tr>
                  </thead>
                  <tbody id="tablaUsuarios">
                    <tr>
                      <td colspan="6" class="text-center text-muted">
                        Sin registros cargados üí§
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

<!--========== MODULO DE AUDITORIA PENDIENTE O HISTORIAL ==========-->
<div id="mod-historial" class="page d-none">

  <div class="page-title">
    <h1>Auditoria Pendiente</h1>
    <div class="page-sub">
      Pendientes la ultima semana: *numeropendiente*
    </div>
  </div>

  <div class="card card-panel historial-card">

    <!-- HEADER -->
    <div class="card-header d-flex justify-content-between align-items-center">
      <h2 class="card-title m-0">√öltimos 7 dias</h2>

      <div class="d-flex gap-2">
      </div>
    </div>

    <!-- BODY -->
    <div class="card-body">

      <!-- Scroll lateral -->
      <div class="historial-table-container">
        <table class="historial-table" id="tablaHistorialFront">

          <!-- ENCABEZADO -->
          <thead>
            <tr>
              <th>ID</th>
              <th>N√∫mero C/S</th>
              <th>Nombre</th>
              <th>Tipo usuario</th>
              <th>Sector</th>

              <th>Tipo foto (E)</th>
              <th>Fecha entrada</th>
              <th>Hora entrada</th>
              <th>Lat entrada</th>
              <th>Lng entrada</th>
              <th>Foto entrada</th>

              <th>Tipo foto (S)</th>
              <th>Fecha salida</th>
              <th>Hora salida</th>
              <th>Lat salida</th>
              <th>Lng salida</th>
              <th>Foto salida</th>
              <th>Actividades</th>
              <th>Novedades</th>
              <th>Observaciones</th>

              <th>Auditor√≠a</th>
            </tr>
          </thead>

          <!-- CUERPO -->
          <tbody id="historialBodyFront">
            <tr>
              <td colspan="21" class="text-center text-muted py-3">
                Cargando historial‚Ä¶ ‚è≥
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- PAGINACI√ìN -->
      <div id="paginacionHistorial" class="historial-paginacion mt-3"></div>

    </div>
  </div>
</div>

        <!--=========Modulo de contrase√±a==========-->
        <div id="mod-config" class="page d-none">
          <div class="page-title">
            <h1>Configuraci√≥n del usuario</h1>
            <div class="page-sub">Opciones personales</div>
          </div>

          <div class="card card-panel">
            <div class="card-header">
              <h2 class="card-title m-0">Cambio de contrase√±a</h2>
            </div>
            <div class="card-body col-md-6">
              <form id="formPassword">
                <div class="mb-3">
                  <label class="form-label">Contrase√±a actual</label>
                  <input
                    type="password"
                    id="passActual"
                    class="form-control"
                    required
                  />
                </div>
                <div class="mb-3">
                  <label class="form-label">Nueva contrase√±a</label>
                  <input
                    type="password"
                    id="passNueva"
                    class="form-control"
                    required
                  />
                </div>
                <div class="mb-3">
                  <label class="form-label">Confirmar contrase√±a</label>
                  <input
                    type="password"
                    id="passConfirm"
                    class="form-control"
                    required
                  />
                </div>
                <button type="submit" class="btn btn-primary">
                  Guardar cambios
                </button>
              </form>
            </div>
          </div>
        </div>

          <!-- ======== FONDO DESENFOCADO MIENTRAS ESTA ABIERTO EL MODAL ======== -->
          <div id="overlay" class="overlay d-none"></div>

          <!-- ======== MODAL DE AUDITOR√çA ======== -->
          <div id="modalAuditoria" class="d-none">
            <div class="auditoria-box">
              <div class="auditoria-header">
                <h2 id="tituloModalAuditoria">Auditor√≠a - </h2>
                <h6 id="fechaAuditoria">fecha actual</h6>
                <button class="btn-cerrar" onclick="cerrarModalAuditoria()">
                  ‚úï
                </button>
              </div>
              <div class="fotos">
                <!-- ======== Inputs(ocultos) ======== -->
                  <input type="hidden" id="hiddenNumeroCS">
                  <input type="hidden" id="hiddenFechaRegistro">
                  <input type="hidden" id="hiddenSector">

                <!--cajita de entarda-->
            <div class="foto-box entrada">
              <img
                class="foto-img"
                src="https://via.placeholder.com/120x120?text=Entrada"
              />
              <!-- ICONO EDITAR -->
              <button id="btnEditarEntrada" class="btn-edit-foto" onclick="document.getElementById('inputEditarEntrada').click()">
                <i class="fa-solid fa-pen"></i>
              </button>

              <input type="file" id="inputEditarEntrada" hidden accept="image/*"
                    onchange="subirFotoEditada(event, 'entrada')" />

              <div class="foto-info">
                <input type="time" id="inputHoraEntrada" value="07:45" />
                <a class="link-maps" id="linkEntrada">
                  <i class="fa-solid fa-location-dot"></i> Ver ubicaci√≥n de ENTRADA
                </a>
              </div>
            </div>

                <!--cajita de salida-->
            <div class="foto-box salida">
              <img
                class="foto-img"
                src="https://via.placeholder.com/120x120?text=Salida"
              />
              <!-- ICONO EDITAR -->
              <button id="btnEditarSalida" class="btn-edit-foto" onclick="document.getElementById('inputEditarSalida').click()">
                <i class="fa-solid fa-pen"></i>
              </button>
              <input type="file" id="inputEditarSalida" hidden accept="image/*"
                    onchange="subirFotoEditada(event, 'salida')" />
              <div class="foto-info">
                <input type="time" id="inputHoraSalida" value="15:30" />
                <a class="link-maps" id="linkSalida" style="color:#fd7e14">
                  <i class="fa-solid fa-location-dot"></i> Ver ubicaci√≥n de SALIDA
                </a>
              </div>
            </div>
              </div>

              <div class="section-pair">
                <div class="section">
                  <label>Actividades (elige hasta 2)</label>
                  <div
                    class="dropdown"
                    onclick="toggleDropdown('actividadesMenu')"
                  >
                    Seleccionar actividades
                  </div>
                  <div id="actividadesMenu" class="dropdown-menu"></div>
                  <div id="listaActividades" class="selected-list"></div>
                </div>

                <div class="section">
                  <label>Novedades (elige hasta 3)</label>
                  <div
                    class="dropdown"
                    onclick="toggleDropdown('novedadesMenu')"
                  >
                    Seleccionar novedades
                  </div>
                  <div id="novedadesMenu" class="dropdown-menu"></div>
                  <div id="listaNovedades" class="selected-list"></div>
                </div>
              </div>

              <div class="section">
                <label>Observaciones generales</label>
                <textarea id="inputObservaciones"
                  placeholder="Escribe aqu√≠ tus observaciones..."
                ></textarea>
              </div>
              <div class="botones">
                <button id="btnGuardarCambios" onclick="guardarCambiosAuditoria()" class=" btn btn-guardar">Guardar</button>
                <button id="btnConfirmarAuditoria" onclick="confirmarAuditoriaFrontend()" class="btn btn-auditar">Finalizar Auditor√≠a</button>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const sidebar = document.getElementById("sidebar");
      const navDim = document.getElementById("navDim");
      const btnMenu = document.getElementById("btnMenu");

      function openNav() {
        sidebar.classList.add("open");
        navDim.classList.add("show");
      }
      function closeNav() {
        sidebar.classList.remove("open");
        navDim.classList.remove("show");
      }

      btnMenu?.addEventListener("click", openNav);
      navDim?.addEventListener("click", closeNav);

      window.addEventListener("resize", () => {
        if (window.innerWidth > 992) closeNav();
      });
    </script>
    <script src="/scripts/admin.js"></script>
  </body>
</html>
